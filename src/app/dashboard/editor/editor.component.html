<div class="wrapper" fxLayout="column">
    <div class="top" fxLayout="row">
        <div *ngIf="lvl === 'Teaching Assistant (TA)'" class="csv" fxLayout="row wrap" fxLayoutGap="0.5vw">
            <div *ngFor="let header of headers" fxFlex=30 class="csvdata">
                <strong>{{header}}</strong> : {{currentData[header]}}
            </div>
        </div>
        <div class="csv" *ngIf="lvl === 'Manager' || lvl === 'Admin'">
            <form *ngIf="fb" [formGroup]="fb" (ngSubmit)="onSubmit()" #changeForm fxLayoutGap="0.5vw" fxLayout="row wrap">
                <mat-form-field *ngFor="let header of headers" [fxFlex]="currentData[header] ? ((currentData[header].toString().length + 3) < 25 ? '25': currentData[header].toString().length+3) : '25'">
                    <input matInput type="text" [placeholder]="header" [formControlName]="header">
                </mat-form-field>
                <button type="submit" mat-raised-button>Submit</button>
            </form>
        </div>
        <iframe [src]="url" width="45%" height="100%"></iframe>
        <div class="studentlist" fxFlex="auto">
            <mat-nav-list role="navigation">
                <mat-list-item *ngFor="let student of students" [routerLink]="'../' + student.uid" (click)="routeIt(student.uid)" [disabled]="id === +student.uid">{{student.name}}</mat-list-item>
            </mat-nav-list>
        </div>
    </div>
    <div class="bottom" fxLayout="row">
        <div class="id">
            <h1>Student ID</h1><br> {{id}}
        </div>
        <div class="fields">
            <h3>Fields to correct</h3>
            <form *ngIf="lvl === 'Teaching Assistant (TA)'">
                <mat-form-field>
                    <input type="text" placeholder="Fields" matInput [formControl]="myFields" [matAutocomplete]="auto">
                    <mat-autocomplete #auto="matAutocomplete" class="completer">
                        <mat-option *ngFor="let option of availfields | async" (click)="add(option)" [value]="option">{{option}}</mat-option>
                    </mat-autocomplete>
                </mat-form-field>
            </form>
            <mat-chip-list>
                <mat-chip *ngFor="let select of selected" [removable]="true" (removed)="delete(select)">{{select}}
                    <mat-icon matChipRemove *ngIf="lvl === 'Teaching Assistant (TA)'">cancel</mat-icon>
                </mat-chip>
            </mat-chip-list>
        </div>
        <div class="comment" fxFlex="auto" *ngIf="lvl === 'Teaching Assistant (TA)'">
            <h1>Add comment</h1>
            <textarea matInput placeholder="Comments" #comment type="text" id="comment"></textarea>
            <button mat-raised-button (click)="save(comment.value)">Save</button>
            <button mat-raised-button (click)="submit(comment.value)">Submit</button>
        </div>
        <div class="comments" fxFlex="auto" *ngIf="lvl === 'Manager' || lvl === 'Admin'">
            <h3>Comments</h3>
            <mat-list>
                <mat-list-item *ngFor="let comment of comments">{{comment}}</mat-list-item>
            </mat-list>
        </div>
    </div>
</div>